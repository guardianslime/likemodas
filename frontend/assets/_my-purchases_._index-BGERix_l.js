import{E as e,F as t,I as n,d as r}from"./chunk-C37GKA54-CfNxjTQL.js";import"./jsx-runtime-CHhOzT3j.js";import{b as i,c as ee,e as a,f as o,j as s,l as c,s as l,u}from"./state-CKLd4-s1.js";import{N as d,Q as f,R as p,S as m,T as h,U as g,V as _,W as v,X as y,Y as b,a7 as x,a8 as S,d as C,n as w,x as T,y as E}from"./esm-BuWRJK6H.js";import{A as D,B as O,D as k,H as A,I as j,P as M,b as N,c as P,f as F,g as I,n as L,s as R,v as te,x as z,y as B,z as V}from"./stateful_components-BRFNziMz.js";import{b as H}from"./createLucideIcon-DqqTLPwf.js";import{b as U}from"./check-check-BWQmlYmG.js";const W=[[`path`,{d:`M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2`,key:`wrbu53`}],[`path`,{d:`M15 18H9`,key:`1lyqi6`}],[`path`,{d:`M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14`,key:`lysw3i`}],[`circle`,{cx:`17`,cy:`18`,r:`2`,key:`332jqn`}],[`circle`,{cx:`7`,cy:`18`,r:`2`,key:`19iecd`}]],G=H(`truck`,W);var K=n(t()),q=n(A());function J(){let e=(0,K.useContext)(c.reflex___state____state);return l(K.Fragment,{},e.is_hydrated_rx_state_?l(Y,{}):l(K.Fragment,{},l(v,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100vh`,width:`100%`,background:`var(--gray-2)`}},l(_,{size:`3`}))))}function Y(){let e=(0,K.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return l(K.Fragment,{},e.is_admin_rx_state_?l(K.Fragment,{},l(y,{},l(y,{css:{"@media screen and (min-width: 0)":{display:`none`},"@media screen and (min-width: 30em)":{display:`none`},"@media screen and (min-width: 48em)":{display:`block`},position:`fixed`,left:`0`,top:`0`,height:`100%`,width:`16em`,zIndex:`1000`,background:`var(--gray-2)`}},l(v,{align:`start`,className:`rx-Stack`,css:{padding:`1em`,height:`100vh`},direction:`column`,gap:`5`},l(v,{align:`center`,className:`rx-Stack`,css:{width:`100%`,marginBottom:`1.5em`},direction:`row`,justify:`center`,gap:`3`},l(`img`,{css:{width:`9em`,height:`auto`,borderRadius:`25%`},src:`/logo.png`})),l(v,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`2`},l(R,{}),l(V,{})),l(v,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),l(v,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},l(w,{size:`4`}),l(v,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,justify:`between`,gap:`3`},l(te,{}),l(v,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}})),l(L,{})))),l(I,{}),l(y,{css:{"@media screen and (min-width: 0)":{marginLeft:`0`},"@media screen and (min-width: 30em)":{marginLeft:`0`},"@media screen and (min-width: 48em)":{marginLeft:`16em`},padding:`2em`,width:`100%`}},l(v,{align:`start`,className:`rx-Stack`,css:{backdropFilter:`blur(10px)`,"@media screen and (min-width: 0)":{display:`flex`},"@media screen and (min-width: 30em)":{display:`flex`},"@media screen and (min-width: 48em)":{display:`none`},position:`sticky`,top:`0`,left:`0`,width:`100%`,padding:`0.5em 1em`,zIndex:`999`,background:`var(--gray-2)`},direction:`row`,gap:`3`},l(j.Trigger,{asChild:!0},l(E,{color:`gray`,css:{padding:`6px`},variant:`ghost`},l(M,{size:24})))),l(K.Fragment,{},l($,{}))),l(y,{css:{position:`fixed`,bottom:`1.5rem`,right:`1.5rem`,zIndex:`1000`}},l(P,{})))):l(K.Fragment,{},l(y,{css:{width:`100%`}},l(N,{}),l(y,{css:{paddingTop:`6rem`,paddingInlineStart:`1em`,paddingInlineEnd:`1em`,paddingBottom:`1em`,width:`100%`}},l(K.Fragment,{},l($,{}))),l(y,{css:{position:`fixed`,bottom:`1.5rem`,right:`1.5rem`,zIndex:`1000`}},l(P,{})))))}function X(){let e=(0,K.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,K.useContext)(s);return l(K.Fragment,{},e.filtered_user_purchases_rx_state_.map((n,a)=>l(f,{css:{width:`100%`,padding:`1.5em`},key:a},l(v,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`4`},l(v,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,justify:`between`,gap:`3`},l(v,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`3`},l(x,{as:`p`,size:`5`,weight:`bold`},`Compra del: `+n.purchase_date_formatted),l(x,{as:`p`,color:`gray`,size:`2`},`ID de Compra: #`+n.id)),l(v,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),l(v,{align:`start`,className:`rx-Stack`,css:{alignItems:`end`},direction:`column`,gap:`3`},l(b,{color:`violet`,size:`2`,variant:`soft`},n.status.replaceAll(`_`,` `).split(` `).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(` `)))),l(w,{size:`4`}),l(v,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,width:`100%`},direction:`column`,gap:`1`},l(x,{as:`p`,size:`4`,weight:`medium`},`Detalles de Envío:`),l(x,{as:`p`,size:`3`},`Nombre: `+n.shipping_name),l(x,{as:`p`,size:`3`},`Dirección: `+n.shipping_address+`, `+n.shipping_neighborhood+`, `+n.shipping_city),l(x,{as:`p`,size:`3`},`Teléfono: `+n.shipping_phone)),l(w,{size:`4`}),l(v,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,width:`100%`},direction:`column`,gap:`2`},l(x,{as:`p`,size:`4`,weight:`medium`},`Artículos Comprados:`),l(x,{as:`p`,color:`gray`,size:`2`},`Haz clic en un producto para ver los detalles o volver a comprar.`),l(d,{css:{width:`100%`},scrollbars:`horizontal`,type:`auto`},l(v,{align:`start`,className:`rx-Stack`,css:{paddingTop:`0.5em`,paddingBottom:`0.5em`},direction:`row`,gap:`4`},(o(e.purchase_items_map_rx_state_[n.id])?e.purchase_items_map_rx_state_[n.id]:[]).map((e,n)=>l(y,{css:{width:`110px`},key:n},l(v,{align:`center`,className:`rx-Stack`,direction:`column`,gap:`1`},l(y,{css:{cursor:`pointer`,position:`relative`,"&:hover":{transform:`scale(1.05)`},transition:`transform 0.2s`},onClick:n=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.open_product_detail_modal`,{post_id:e.id},{})],[n],{})},l(`img`,{alt:e.title,css:{width:`100px`,height:`100px`,objectFit:`cover`,borderRadius:`md`},src:ee(u.UPLOAD)+`/`+e.image_url})),l(v,{align:`start`,className:`rx-Stack`,css:{alignItems:`center`,marginTop:`0.25em`},direction:`column`,gap:`0`},l(x,{as:`p`,color:`gray`,size:`2`},e.quantity+`x `+e.price_at_purchase_cop),l(x,{as:`p`,size:`3`,weight:`bold`},e.subtotal_cop)))))))),l(v,{align:`start`,className:`rx-Stack`,css:{alignItems:`end`,width:`100%`,marginTop:`1em`},direction:`column`,gap:`2`},l(v,{align:`center`,className:`rx-Stack`,direction:`row`,gap:`3`},l(v,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),l(x,{as:`p`,size:`4`,weight:`medium`},`Envío:`),l(x,{as:`p`,size:`4`},n.shipping_applied_cop)),l(v,{align:`center`,className:`rx-Stack`,direction:`row`,gap:`3`},l(v,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),l(S,{size:`5`,weight:`medium`},`Total Compra:`),l(S,{size:`6`},n.total_price_cop))),l(w,{css:{marginTop:`1em`,marginBottom:`1em`},size:`4`}),l(K.Fragment,{},n.status===`shipped`?l(K.Fragment,{},l(v,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},l(m,{color:`blue`,css:{icon:`truck`,width:`100%`}},l(p,{},l(G,{})),l(h,{},`Tu pedido llegará aproximadamente el: `+n.estimated_delivery_date_formatted)),l(g,{color:`green`,css:{width:`100%`,marginTop:`0.5em`},onClick:e=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.user_confirm_delivery`,{purchase_id:n.id},{})],[e],{})},`He Recibido mi Pedido`))):l(K.Fragment,{})),l(K.Fragment,{},n.status===`delivered`?l(K.Fragment,{},l(v,{align:`start`,className:`rx-Stack`,css:{width:`100%`,alignItems:`center`},direction:`column`,gap:`3`},l(m,{color:`violet`,css:{icon:`check_check`,width:`100%`}},l(p,{},l(U,{})),l(h,{},`¡Pedido entregado! Gracias por tu compra.`)),l(v,{align:`start`,className:`rx-Stack`,css:{marginTop:`1em`,width:`100%`},direction:`row`,gap:`3`},l(T,{asChild:!0,css:{width:`100%`,"&:hover":{color:`var(--accent-8)`}}},l(r,{target:``,to:`/invoice?id=`+n.id},l(g,{css:{width:`100%`},variant:`outline`},`Imprimir Factura`))),l(g,{color:`orange`,css:{width:`100%`},onClick:e=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.go_to_return_page`,{purchase_id:n.id},{})],[e],{}),variant:`solid`},`Devolución o Cambio`)))):l(K.Fragment,{}))))))}function Z(){(0,K.useEffect)(()=>(((...t)=>e([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.check_for_auto_confirmations`,{},{})],t,{}))(),()=>{}),[]);let[e,t]=(0,K.useContext)(s);return l(v,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,width:`100%`}},l(v,{align:`center`,className:`rx-Stack`,css:{width:`100%`,maxWidth:`960px`},direction:`column`,gap:`6`},l(S,{size:`7`},`Mi Historial de Compras`),l(re,{}),l(Q,{}),l(F,{})))}function Q(){let e=(0,K.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return l(K.Fragment,{},o(e.filtered_user_purchases_rx_state_)?l(X,{}):l(K.Fragment,{},l(v,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,paddingTop:`2em`,paddingBottom:`2em`}},l(x,{as:`p`},`No se encontraron compras para tu búsqueda.`))))}function ne(){let e=(0,K.useContext)(c.reflex___state____state);return l(K.Fragment,{},e.is_hydrated_rx_state_?l(K.Fragment,{},l(v,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,minHeight:`85vh`,width:`100%`},direction:`row`,gap:`3`},l(v,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,padding:`1em`,borderRight:`1px solid #ededed`,height:`100%`,minWidth:`250px`},direction:`column`,gap:`2`},l(S,{css:{marginBottom:`1em`},size:`6`},`Mi Cuenta`),l(D,{}),l(z,{}),l(B,{}),l(O,{})),l(y,{css:{padding:`2em`,width:`100%`}},l(Z,{})))):l(K.Fragment,{},l(v,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`85vh`}},l(_,{size:`3`}))))}function re(){let e=(0,K.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,K.useContext)(s),r=(0,K.useCallback)(e=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.set_search_query_user_history`,{query:e.target.value},{})],[e],{}),[t,i]);return l(q.default,{css:{width:`100%`,maxWidth:`400px`,marginTop:`1.5em`,marginBottom:`1.5em`},debounceTimeout:300,element:C,onChange:r,placeholder:`Buscar por ID o producto...`,value:a(e.search_query_user_history_rx_state_)?e.search_query_user_history_rx_state_:``})}function $(){let e=(0,K.useContext)(c.reflex___state____state),t=(0,K.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state);return l(K.Fragment,{},e.is_hydrated_rx_state_&&t.is_authenticated_rx_state_?l(ne,{}):l(K.Fragment,{},l(v,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`}},l(k,{}))))}var ie=e(function(){return l(K.Fragment,{},l(J,{}),l(`title`,{},`Mis Compras`),l(`meta`,{content:`favicon.ico`,property:`og:image`}))});export{ie as default};