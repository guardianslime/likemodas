# nixpacks.toml
# Configuración definitiva para construir y ejecutar el backend en Railway

providers = ['python']

[variables]
  NEXT_TELEMETRY_DISABLED = '1'
  NPM_CONFIG_UPDATE_NOTIFIER = 'false'
  NPM_CONFIG_FUND = 'false'
  PIP_DISABLE_PIP_VERSION_CHECK = '1'

[phases.setup]
  apt_packages = ["git", "nodejs", "npm", "unzip", "parallel", "build-essential"]

# --- INICIO DE LA CORRECCIÓN DEFINITIVA ---
# Cambiamos --host por --backend-host, que es el parámetro correcto.
[start]
  cmd = "alembic upgrade head && reflex run --backend-only --backend-host 0.0.0.0 --backend-port 8000 --loglevel info"
# --- FIN DE LA CORRECCIÓN DEFINITIVA ---