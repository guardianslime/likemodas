import{b as e,e as t}from"./react-BXOerpTB.js";import"./react-dom-D8GVFCvq.js";import{E as n}from"./chunk-C37GKA54-oIb2CP3u.js";import"./jsx-runtime-BXJ_ONyh.js";import{b as r,c as i,e as a,f as o,g as ee,k as s,m as c,t as l,v as te}from"./state-B1PZ0aqK.js";import"./react-is-D638tHAp.js";import{$ as u,O as d,P as f,Q as p,R as ne,S as re,V as m,X as h,Y as g,Z as _,_ as v,a1 as y,a2 as b,a4 as x,a5 as S,a6 as C,a7 as w,a8 as T,a9 as E,aa as D,ab as O,ad as k,ae as A,d as j,r as M}from"./esm-DH1OcaC_.js";import"./shim-PtsC5cP_.js";import{A as ie,B as ae,C as N,G as P,H as F,J as I,K as L,M as R,b as z,c as B,e as V,k as H,z as U}from"./stateful_components-DbREeexr.js";import{b as W}from"./createLucideIcon-DZIvVBUJ.js";import"./es6-Dv37JT2w.js";const G=[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}],[`path`,{d:`M12 8v4`,key:`1got3b`}],[`path`,{d:`M12 16h.01`,key:`1drbdi`}]],K=W(`shield-alert`,G),q=[[`path`,{d:`M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z`,key:`oel41y`}],[`path`,{d:`m9 12 2 2 4-4`,key:`dzmm74`}]],J=W(`shield-check`,q);var Y=t(e()),X=t(L());function oe(){let[e,t]=(0,Y.useContext)(s),n=(0,Y.useCallback)(t=>{let n=t.target;t.preventDefault();let i={...Object.fromEntries(new FormData(n).entries())};((...t)=>e([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.disable_tfa`,{form_data:i},{})],t,{}))(t)});return l(I,{className:`Root `,css:{width:`100%`},onSubmit:n},l(y,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`3`},l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`stretch`},direction:`column`,gap:`3`},l(P,{}),l(H,{})),l(y,{css:{marginTop:`1em`},justify:`end`,gap:`3`},l(S,{},l(v,{},`Cancelar`)),l(C,{},l(v,{type:`submit`},`Sí, desactivar`)))))}function se(){let e=(0,Y.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return l(Y.Fragment,{},e.is_admin_rx_state_?l(Y.Fragment,{},l(b,{css:{width:`100%`,minHeight:`100vh`}},l(z,{}),l(m,{columns:{initial:`1`,lg:`5em 1fr`},css:{width:`100%`}},l(b,{css:{"@media screen and (min-width: 0)":{display:`none`},"@media screen and (min-width: 30em)":{display:`none`},"@media screen and (min-width: 48em)":{display:`block`}}}),l(b,{css:{width:`100%`,height:`100%`,"@media screen and (min-width: 0)":{paddingInlineStart:`1em`,paddingInlineEnd:`1em`},"@media screen and (min-width: 30em)":{paddingInlineStart:`2em`,paddingInlineEnd:`2em`},paddingTop:`2em`,paddingBottom:`2em`}},l(Y.Fragment,{},l(Q,{}),l(Z,{})))))):l(Y.Fragment,{},l(b,{css:{width:`100%`}},l(B,{}),l(b,{css:{paddingTop:`6rem`,paddingInlineStart:`1em`,paddingInlineEnd:`1em`,paddingBottom:`1em`,width:`100%`}},l(Y.Fragment,{},l(Q,{}),l(Z,{}))))))}function Z(){let e=(0,Y.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,Y.useContext)(s),i=(0,Y.useCallback)(e=>t([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.set_show_tfa_activation_modal`,{state:e},{})],[e],{}),[t,r]);return l(re,{onOpenChange:i,open:e.show_tfa_activation_modal_rx_state_},l(ne,{},l(f,{},`Activar Autenticación de Dos Factores`),l(p,{},`Escanea este código QR con tu aplicación de autenticación.`),l(y,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,marginTop:`1.5em`,marginBottom:`1.5em`}},l(Se,{})),l($,{}),l(y,{css:{marginTop:`1em`},justify:`end`},l(d,{},l(v,{color:`gray`,variant:`soft`},`Cancelar`)))))}function ce(){let e=(0,Y.useContext)(c.reflex___state____state__likemodas___ui___password_input____password_input_state);return l(j,{name:`confirm_password`,required:!0,type:e.show_password_rx_state_?`text`:`password`})}function le(){let e=(0,Y.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,Y.useContext)(s),i=(0,Y.useCallback)(e=>t([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.set_profile_phone`,{phone:e.target.value},{})],[e],{}),[t,r]);return l(X.default,{debounceTimeout:300,element:j,name:`phone`,onChange:i,value:a(e.profile_phone_rx_state_)?e.profile_phone_rx_state_:``})}function ue(){let[e,t]=(0,Y.useContext)(s),n=(0,Y.useCallback)(t=>{let n=t.target;t.preventDefault();let i={...Object.fromEntries(new FormData(n).entries())};((...t)=>e([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.handle_account_deletion`,{form_data:i},{})],t,{}))(t)});return l(I,{className:`Root `,css:{width:`100%`,border:`1px solid var(--red-7)`,borderRadius:`var(--radius-3)`,padding:`1.5em`},onSubmit:n},l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`4`},l(A,{color:`red`,size:`6`},`Zona de Peligro`),l(k,{as:`p`},`La eliminación de tu cuenta es permanente.`),l(M,{size:`4`}),l(k,{as:`p`},`Confirma tu contraseña:`),l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`stretch`},direction:`column`,gap:`3`},l(P,{}),l(H,{})),l(E,{},l(O,{},l(v,{color:`red`},`Eliminar mi Cuenta`)),l(D,{},l(w,{},`¿Estás seguro?`),l(T,{},`Esta acción es irreversible.`),l(y,{css:{marginTop:`1em`},justify:`end`,gap:`3`},l(S,{},l(v,{},`Cancelar`)),l(C,{},l(v,{type:`submit`},`Sí, eliminar`)))))))}function Q(){let e=(0,Y.useContext)(c.reflex___state____state);return l(Y.Fragment,{},e.is_hydrated_rx_state_?l(Y.Fragment,{},l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,minHeight:`85vh`,width:`100%`},direction:`row`,gap:`3`},l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,padding:`1em`,borderRight:`1px solid #ededed`,height:`100%`,minWidth:`250px`},direction:`column`,gap:`2`},l(A,{css:{marginBottom:`1em`},size:`6`},`Mi Cuenta`),l(ae,{}),l(U,{}),l(ie,{}),l(N,{})),l(b,{css:{padding:`2em`,width:`100%`}},l(y,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,paddingInlineStart:`1em`,paddingInlineEnd:`1em`}},l(y,{align:`start`,className:`rx-Stack`,css:{maxWidth:`1200px`},direction:`column`,gap:`6`},l(A,{size:`8`},`Mi Perfil`),l(k,{as:`p`},`Gestiona tu información personal y de seguridad.`),l(M,{css:{marginTop:`1.5em`,marginBottom:`1.5em`},size:`4`}),l(A,{size:`6`},`Imagen de Perfil`),l(y,{align:`center`,className:`rx-Stack`,direction:`row`,gap:`5`},l(be,{}),l(xe,{})),l(M,{css:{marginTop:`1.5em`,marginBottom:`1.5em`},size:`4`}),l(m,{columns:{initial:`1`,md:`2`},gap:`6`},l(de,{}),l(_e,{})),l(M,{css:{marginTop:`2em`,marginBottom:`2em`},size:`4`}),l(y,{align:`start`,className:`rx-Stack`,css:{border:`1px solid var(--gray-a7)`,borderRadius:`var(--radius-3)`,padding:`1.5em`},direction:`column`,gap:`4`},l(A,{size:`6`},`Seguridad de la Cuenta`),l(k,{as:`p`},`Gestiona la autenticación de dos factores (2FA).`),l(M,{size:`4`}),l(ge,{})),l(M,{css:{marginTop:`2em`,marginBottom:`2em`},size:`4`}),l(ue,{})))))):l(Y.Fragment,{},l(y,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`85vh`}},l(u,{size:`3`}))))}function de(){let[e,t]=(0,Y.useContext)(s),n=(0,Y.useCallback)(t=>{let n=t.target;t.preventDefault();let i={...Object.fromEntries(new FormData(n).entries())};((...t)=>e([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.handle_profile_update`,{form_data:i},{})],t,{}))(t)});return l(I,{className:`Root `,css:{width:`100%`},onSubmit:n},l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`4`},l(A,{size:`6`},`Información General`),l(k,{as:`p`},`Nombre de Usuario`),l(ye,{}),l(k,{as:`p`},`Email (no se puede cambiar)`),l(he,{}),l(k,{as:`p`},`Teléfono`),l(le,{}),l(v,{type:`submit`},`Guardar Cambios`)))}function fe(){let e=(0,Y.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return l(`img`,{css:{width:`256px`,height:`256px`},src:e.tfa_qr_code_data_uri_rx_state_})}function pe(){let e=(0,Y.useContext)(c.reflex___state____state__likemodas___ui___password_input____password_input_state);return l(j,{name:`new_password`,required:!0,type:e.show_password_rx_state_?`text`:`password`})}function me(){let e=(0,Y.useContext)(c.reflex___state____state);return l(Y.Fragment,{},e.is_hydrated_rx_state_?l(se,{}):l(Y.Fragment,{},l(y,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100vh`,width:`100%`,background:`var(--gray-2)`}},l(u,{size:`3`}))))}function he(){let e=(0,Y.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return l(j,{css:{isDisabled:!0},name:`email`,value:a(e.profile_info_rx_state_.email)?e.profile_info_rx_state_.email:``})}function ge(){let e=(0,Y.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return l(Y.Fragment,{},e.profile_info_rx_state_.tfa_enabled?l(Y.Fragment,{},l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`3`},l(g,{color:`green`},l(h,{},l(J,{})),l(_,{},`2FA está activa.`)),l(E,{},l(O,{},l(v,{color:`red`,css:{marginTop:`1em`},variant:`soft`},`Desactivar 2FA`)),l(D,{},l(w,{},`¿Desactivar 2FA?`),l(T,{},`Introduce tu contraseña para confirmar.`),l(oe,{}))))):l(Y.Fragment,{},l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`3`},l(g,{color:`orange`},l(h,{},l(K,{})),l(_,{},`2FA no está activa.`)),l(ve,{}))))}function _e(){let[e,t]=(0,Y.useContext)(s),n=(0,Y.useCallback)(t=>{let n=t.target;t.preventDefault();let i={...Object.fromEntries(new FormData(n).entries())};((...t)=>e([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.handle_password_change`,{form_data:i},{})],t,{}))(t)});return l(I,{className:`Root `,css:{width:`100%`},onSubmit:n},l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`4`},l(A,{size:`6`},`Cambiar Contraseña`),l(k,{as:`p`},`Contraseña Actual`),l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`stretch`},direction:`column`,gap:`3`},l(Ce,{}),l(H,{})),l(k,{as:`p`},`Nueva Contraseña`),l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`stretch`},direction:`column`,gap:`3`},l(pe,{}),l(H,{})),l(k,{as:`p`},`Confirmar Nueva Contraseña`),l(y,{align:`start`,className:`rx-Stack`,css:{alignItems:`stretch`},direction:`column`,gap:`3`},l(ce,{}),l(H,{})),l(v,{type:`submit`},`Actualizar Contraseña`)))}function $(){let[e,t]=(0,Y.useContext)(s),n=(0,Y.useCallback)(t=>{let n=t.target;t.preventDefault();let i={...Object.fromEntries(new FormData(n).entries())};((...t)=>e([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.verify_and_enable_tfa`,{form_data:i},{})],t,{}))(t)});return l(I,{className:`Root `,css:{width:`100%`},onSubmit:n},l(y,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`3`},l(k,{as:`p`},`Introduce el código de 6 dígitos para confirmar.`),l(j,{maxLength:6,name:`tfa_code`,placeholder:`123456`,required:!0}),l(v,{type:`submit`},`Verificar y Activar`)))}function ve(){let[e,t]=(0,Y.useContext)(s),n=(0,Y.useCallback)(t=>e([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.start_tfa_activation`,{},{})],[t],{}),[e,r]);return l(v,{css:{marginTop:`1em`},onClick:n},`Activar 2FA`)}function ye(){let e=(0,Y.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,Y.useContext)(s),i=(0,Y.useCallback)(e=>t([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.set_profile_username`,{name:e.target.value},{})],[e],{}),[t,r]);return l(X.default,{debounceTimeout:300,element:j,name:`username`,onChange:i,required:!0,value:a(e.profile_username_rx_state_)?e.profile_username_rx_state_:``})}function be(){let e=(0,Y.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return l(x,{fallback:o(e.profile_info_rx_state_.username)?e.profile_info_rx_state_.username.at(0).toUpperCase():`?`,size:`8`,src:i(te.UPLOAD)+`/`+e.profile_info_rx_state_.avatar_url})}function xe(){let e=(0,Y.useRef)(null);ee.ref_avatar_upload=e;let[t,n]=(0,Y.useContext)(s),i=(0,Y.useCallback)(e=>t([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.handle_avatar_upload`,{files:e,upload_id:`avatar_upload`},{},`uploadFiles`)],[e],{}),[t,r]),{getRootProps:a,getInputProps:o,isDragActive:c}=F({onDrop:i,multiple:!0,id:`avatar_upload`});return l(Y.Fragment,{},l(b,{className:`rx-Upload`,css:{border:`2px dashed #ccc`,padding:`3em`,textAlign:`center`},id:`avatar_upload`,ref:e,...a()},l(`input`,{type:`file`,...o()}),l(y,{align:`start`,className:`rx-Stack`,direction:`column`,gap:`3`},l(R,{}),l(k,{as:`p`},`Arrastra una imagen aquí.`))))}function Se(){let e=(0,Y.useContext)(c.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return l(Y.Fragment,{},o(e.tfa_qr_code_data_uri_rx_state_)?l(Y.Fragment,{},l(fe,{})):l(Y.Fragment,{},l(u,{})))}function Ce(){let e=(0,Y.useContext)(c.reflex___state____state__likemodas___ui___password_input____password_input_state);return l(j,{name:`current_password`,required:!0,type:e.show_password_rx_state_?`text`:`password`})}var we=n(function(){return l(Y.Fragment,{},l(b,{},l(me,{}),l(b,{css:{position:`fixed`,bottom:`1.5rem`,right:`1.5rem`,zIndex:`1000`}},l(V,{}))),l(`title`,{},`Mi Perfil`),l(`meta`,{content:`favicon.ico`,property:`og:image`}))});export{we as default};