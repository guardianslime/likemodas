import{g as e}from"./chunk-D0jsGFqN.js";import{b as t}from"./react-DzgTcpVV.js";import"./react-dom-8Ilu748P.js";import{E as n,d as r}from"./chunk-C37GKA54-sj5ro6ba.js";import"./jsx-runtime-S3RLqJAs.js";import{b as i,c as a,e as o,f as s,k as c,m as l,t as u,w as d}from"./state-Jyb5WDnJ.js";import"./react-is-7lvbQIIy.js";import{$ as f,F as p,a1 as m,a2 as h,a3 as g,a4 as _,a5 as v,a6 as y,a7 as b,a8 as x,a9 as S,aj as C,ak as w,d as T,s as E}from"./esm-eIIhAi8X.js";import"./shim-BjrDKIa7.js";import{B as D,J as O,K as k,L as A,M as j,N as M,Q as N,V as P,Z as F,a1 as I,c as L,e as R,f as z,h as B,r as V,s as H}from"./stateful_components-BBnUdPCO.js";import"./classnames-zcZcbCXW.js";import{b as U}from"./createLucideIcon-C70d8-cz.js";import"./prop-types-CjN7xO3H.js";import"./es6-_-zrz-G8.js";const W=[[`path`,{d:`M12 6v6l4 2`,key:`mmk7yg`}],[`circle`,{cx:`12`,cy:`12`,r:`10`,key:`1mglay`}]],G=U(`clock`,W);var K=e(t()),q=e(P());function J(){let e=(0,K.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return u(K.Fragment,{},s(e.filtered_user_purchases_rx_state_)?u(Z,{}):u(K.Fragment,{},u(b,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,paddingTop:`2em`,paddingBottom:`2em`}},u(C,{as:`p`},`No se encontraron compras para tu búsqueda.`))))}function Y(){let e=(0,K.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,K.useContext)(c),r=(0,K.useCallback)(e=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.set_search_query_user_history`,{query:e.target.value},{})],[e],{}),[t,i]);return u(q.default,{css:{width:`100%`,maxWidth:`400px`,marginTop:`1.5em`,marginBottom:`1.5em`},debounceTimeout:300,element:T,onChange:r,placeholder:`Buscar por ID o producto...`,value:o(e.search_query_user_history_rx_state_)?e.search_query_user_history_rx_state_:``})}function X(){let e=(0,K.useContext)(l.reflex___state____state);return u(K.Fragment,{},e.is_hydrated_rx_state_?u($,{}):u(K.Fragment,{},u(b,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100vh`,width:`100%`,background:`var(--gray-2)`}},u(y,{size:`3`}))))}function Z(){let e=(0,K.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,K.useContext)(c);return u(K.Fragment,{},e.filtered_user_purchases_rx_state_.map((e,n)=>u(m,{css:{width:`100%`,minWidth:`370px`,padding:`1.5em`},key:n},u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`4`},u(b,{align:{initial:`start`,sm:`center`},css:{width:`100%`},direction:{initial:`column`,sm:`row`},justify:`between`},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`3`},u(C,{as:`p`,size:`5`,weight:`bold`},`Compra del: `+e.purchase_date_formatted),u(C,{as:`p`,color:`gray`,size:`2`},`ID: #`+e.id)),u(b,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),u(S,{color:`violet`,size:`2`,variant:`soft`},e.status.replaceAll(`_`,` `).split(` `).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(` `))),u(E,{size:`4`}),u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,width:`100%`},direction:`column`,gap:`1`},u(C,{as:`p`,size:`4`,weight:`medium`},`Detalles de Envío:`),u(C,{as:`p`,size:`3`},`Recibe: `+e.shipping_name),u(C,{as:`p`,size:`3`},`Dirección: `+e.shipping_address+`, `+e.shipping_neighborhood+`, `+e.shipping_city),u(C,{as:`p`,size:`3`},`Teléfono: `+e.shipping_phone),u(K.Fragment,{},s(e.tracking_number)?u(K.Fragment,{},u(x,{css:{width:`100%`,marginTop:`0.5em`}},u(g,{color:`blue`,css:{icon:`truck`,width:`100%`},size:`2`},u(h,{},u(F,{})),u(_,{},u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`1`},u(C,{as:`p`,weight:`bold`},`Empresa: `+e.shipping_carrier),u(C,{as:`p`},`Guía: `+e.tracking_number),u(p,{asChild:!0,css:{"&:hover":{color:`var(--accent-8)`}}},u(r,{target:`_blank`,to:e.tracking_url},u(v,{color:`blue`,css:{marginTop:`0.5em`,width:`100%`},size:`2`,variant:`outline`},`Rastrear Pedido`)))))))):u(K.Fragment,{},e.estimated_delivery_date_formatted===`N/A`?u(K.Fragment,{}):u(K.Fragment,{},u(g,{color:`orange`,css:{icon:`clock`,width:`100%`,marginTop:`0.5em`}},u(h,{},u(G,{})),u(_,{},`Entrega Manual Estimada: `+e.estimated_delivery_date_formatted)))))),u(E,{size:`4`}),u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,width:`100%`},direction:`column`,gap:`2`},u(C,{as:`p`,size:`4`,weight:`medium`},`Artículos Comprados:`),u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},e.product_list.map((e,n)=>u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,width:`100%`,padding:`0.5em`,border:`1px solid #EAEAEA`,borderRadius:`md`},direction:`row`,key:n,gap:`3`},u(x,{css:{flexShrink:0,cursor:`pointer`,"&:hover":{opacity:.8}},onClick:n=>t([i(`_redirect`,{path:`/?product_id_to_load=`+e.id,external:!1,replace:!1},{})],[n],{})},u(`img`,{alt:e.title,css:{height:`70px`,width:`70px`,objectFit:`cover`,borderRadius:`md`},src:a(d.UPLOAD)+`/`+e.image_url})),u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,flexGrow:1,minWidth:`0`},direction:`column`,gap:`1`},u(C,{as:`p`,size:`3`,weight:`bold`},e.title),u(C,{as:`p`,color:`gray`,size:`2`},e.variant_details_str),u(b,{align:`start`,className:`rx-Stack`,direction:`row`,gap:`3`},u(C,{as:`p`,size:`2`,weight:`bold`},`Cant: `+e.quantity),u(C,{as:`p`,color:`violet`,size:`2`},e.price_at_purchase_cop))))))),u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`,marginTop:`1em`},direction:`row`,gap:`3`},u(b,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),u(f,{columns:`2`,css:{alignItems:`center`},gapX:`4`,gapY:`2`},u(C,{as:`p`,css:{textAlign:`right`},size:`4`,weight:`medium`},`Envío:`),u(C,{as:`p`,css:{textAlign:`right`},size:`4`},e.shipping_applied_cop),u(w,{css:{textAlign:`right`},size:`5`,weight:`bold`},`Total Compra:`),u(w,{css:{textAlign:`right`},size:`6`},e.total_price_cop))),u(E,{css:{marginTop:`1em`,marginBottom:`1em`},size:`4`}),u(K.Fragment,{},e.status===`shipped`?u(K.Fragment,{},u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`,marginBottom:`1em`},direction:`column`,gap:`3`},u(g,{color:`blue`,css:{icon:`info`,width:`100%`}},u(h,{},u(I,{})),u(_,{},`El vendedor ha marcado tu pedido como enviado.`)),u(v,{color:`green`,css:{width:`100%`,marginTop:`0.5em`},onClick:n=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.user_confirm_delivery`,{purchase_id:e.id},{})],[n],{}),size:`3`},`¡He Recibido mi Pedido!`))):u(K.Fragment,{})),u(K.Fragment,{},e.status===`delivered`?u(K.Fragment,{},u(b,{css:{width:`100%`},direction:{initial:`column`,sm:`row`},gap:`3`},u(p,{asChild:!0,css:{width:`100%`,"&:hover":{color:`var(--accent-8)`}}},u(r,{target:``,to:`/invoice?id=`+e.id},u(v,{css:{width:`100%`},variant:`outline`},`Imprimir Factura`))),u(v,{color:`orange`,css:{width:`100%`},onClick:n=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.go_to_return_page`,{purchase_id:e.id},{})],[n],{}),variant:`solid`},`Devolución o Cambio`))):u(K.Fragment,{}))))))}function Q(){let e=(0,K.useContext)(l.reflex___state____state),t=(0,K.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state);return u(K.Fragment,{},e.is_hydrated_rx_state_&&t.is_authenticated_rx_state_?u(K.Fragment,{},u(x,{},u(X,{}),u(H,{}),u(V,{}),u(L,{}),u(x,{css:{position:`fixed`,bottom:`1.5rem`,right:`1.5rem`,zIndex:`1000`}},u(B,{})))):u(K.Fragment,{},u(b,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`}},u(N,{}))))}function $(){let e=(0,K.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return u(K.Fragment,{},e.is_admin_rx_state_||e.is_vendedor_rx_state_||e.is_empleado_rx_state_?u(K.Fragment,{},u(x,{css:{width:`100%`,minHeight:`100vh`}},u(z,{}),u(f,{columns:{initial:`1`,lg:`5em 1fr`},css:{width:`100%`}},u(x,{css:{"@media screen and (min-width: 0)":{display:`none`},"@media screen and (min-width: 30em)":{display:`none`},"@media screen and (min-width: 48em)":{display:`block`}}}),u(x,{css:{width:`100%`,height:`100%`,"@media screen and (min-width: 0)":{paddingInlineStart:`1em`,paddingInlineEnd:`1em`},"@media screen and (min-width: 30em)":{paddingInlineStart:`2em`,paddingInlineEnd:`2em`},paddingTop:`2em`,paddingBottom:`2em`}},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,minHeight:`85vh`,width:`100%`},direction:`row`,gap:`3`},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,padding:`1em`,borderRight:`1px solid var(--gray-6)`,height:`100%`,minWidth:`250px`},direction:`column`,gap:`2`},u(w,{css:{marginBottom:`0.5em`,paddingInlineStart:`0.75em`,paddingInlineEnd:`0.75em`},size:`7`},`Mi Cuenta`),u(j,{}),u(k,{}),u(A,{}),u(O,{}),u(M,{})),u(b,{align:`center`,className:`rx-Stack`,css:{padding:`2em`,width:`100%`},direction:`column`,gap:`3`},u(b,{align:`center`,className:`rx-Stack`,css:{width:`100%`,maxWidth:`960px`,padding:`2em`},direction:`column`,gap:`6`},u(w,{css:{textAlign:`center`},size:`8`},`Mi Historial de Compras`),u(C,{as:`p`,color:`gray`,css:{textAlign:`center`},size:`4`},`Aquí puedes ver el estado y los detalles de todos tus pedidos.`),u(Y,{}),u(J,{})))))))):u(K.Fragment,{},u(x,{css:{width:`100%`}},u(K.Fragment,{},u(R,{}),u(D,{})),u(x,{css:{paddingTop:`6rem`,paddingInlineStart:`1em`,paddingInlineEnd:`1em`,paddingBottom:`1em`,width:`100%`}},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,minHeight:`85vh`,width:`100%`},direction:`row`,gap:`3`},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,padding:`1em`,borderRight:`1px solid var(--gray-6)`,height:`100%`,minWidth:`250px`},direction:`column`,gap:`2`},u(w,{css:{marginBottom:`0.5em`,paddingInlineStart:`0.75em`,paddingInlineEnd:`0.75em`},size:`7`},`Mi Cuenta`),u(j,{}),u(k,{}),u(A,{}),u(O,{}),u(M,{})),u(b,{align:`center`,className:`rx-Stack`,css:{padding:`2em`,width:`100%`},direction:`column`,gap:`3`},u(b,{align:`center`,className:`rx-Stack`,css:{width:`100%`,maxWidth:`960px`,padding:`2em`},direction:`column`,gap:`6`},u(w,{css:{textAlign:`center`},size:`8`},`Mi Historial de Compras`),u(C,{as:`p`,color:`gray`,css:{textAlign:`center`},size:`4`},`Aquí puedes ver el estado y los detalles de todos tus pedidos.`),u(Y,{}),u(J,{}))))))))}var ee=n(function(){return u(K.Fragment,{},u(K.Fragment,{},u(Q,{})),u(`title`,{},`Mis Compras`),u(`meta`,{content:`favicon.ico`,property:`og:image`}))});export{ee as default};