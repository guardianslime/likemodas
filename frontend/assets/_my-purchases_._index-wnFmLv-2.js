import{b as e,f as t}from"./react-B1pLPOfF.js";import"./react-dom-_rwvoisj.js";import{E as n,d as r}from"./chunk-C37GKA54-Df2h6uZC.js";import"./jsx-runtime-TComiJ7J.js";import{b as i,c as a,e as o,f as s,k as c,m as l,t as u,v as d}from"./state-DVS5zpgJ.js";import"./react-is-CesL7Lst.js";import{$ as f,B as p,V as m,W as h,X as g,Y as _,Z as v,_ as y,a1 as b,a2 as x,a3 as S,ad as C,ae as w,d as T,r as E}from"./esm-vYUVToaF.js";import"./shim-DaUqr6bO.js";import{C as D,D as O,E as k,F as A,J as j,O as M,S as N,d as P,e as F,f as I,l as L}from"./stateful_components-DL47fceG.js";import"./createLucideIcon-CuUmuiy3.js";import{b as R}from"./check-check-DrOciGGb.js";import"./es6-DWZP2X3a.js";import"./prop-types-DtOHC0Kp.js";var z=t(e()),B=t(M());function V(){let e=(0,z.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return u(z.Fragment,{},e.is_admin_rx_state_?u(z.Fragment,{},u(J,{})):u(z.Fragment,{},u(x,{css:{width:`100%`}},u(P,{}),u(x,{css:{paddingTop:`6rem`,paddingInlineStart:`1em`,paddingInlineEnd:`1em`,paddingBottom:`1em`,width:`100%`}},u(z.Fragment,{},u(K,{}))))))}function H(){let e=(0,z.useContext)(l.reflex___state____state);return u(z.Fragment,{},e.is_hydrated_rx_state_?u(V,{}):u(z.Fragment,{},u(b,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100vh`,width:`100%`,background:`var(--gray-2)`}},u(f,{size:`3`}))))}function U(){let e=(0,z.useContext)(l.reflex___state____state);return u(z.Fragment,{},e.is_hydrated_rx_state_?u(W,{}):u(z.Fragment,{},u(b,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100vh`,width:`100%`,background:`var(--gray-2)`}},u(f,{size:`3`}))))}function W(){let e=(0,z.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return u(z.Fragment,{},e.is_admin_rx_state_?u(z.Fragment,{},u(q,{})):u(z.Fragment,{},u(x,{css:{width:`100%`}},u(P,{}),u(x,{css:{paddingTop:`6rem`,paddingInlineStart:`1em`,paddingInlineEnd:`1em`,paddingBottom:`1em`,width:`100%`}},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,minHeight:`85vh`,width:`100%`},direction:`row`,gap:`3`},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,padding:`1em`,borderRight:`1px solid var(--gray-6)`,height:`100%`,minWidth:`250px`},direction:`column`,gap:`2`},u(w,{css:{marginBottom:`0.5em`,paddingInlineStart:`0.75em`,paddingInlineEnd:`0.75em`},size:`7`},`Mi Cuenta`),u(A,{}),u(O,{}),u(k,{}),u(D,{})),u(x,{css:{padding:`2em`,width:`100%`}},u(b,{align:`center`,className:`rx-Stack`,css:{width:`100%`,maxWidth:`960px`},direction:`column`,gap:`6`},u(w,{size:`8`},`Mi Historial de Compras`),u(C,{as:`p`,color:`gray`,size:`4`},`Aquí puedes ver el estado y los detalles de todos tus pedidos.`),u(X,{}),u(Y,{}))))))))}function G(){let e=(0,z.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,z.useContext)(c);return u(z.Fragment,{},e.filtered_user_purchases_rx_state_.map((n,o)=>u(h,{css:{width:`100%`,padding:`1.5em`},key:o},u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`4`},u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,justify:`between`,gap:`3`},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`3`},u(C,{as:`p`,size:`5`,weight:`bold`},`Compra del: `+n.purchase_date_formatted),u(C,{as:`p`,color:`gray`,size:`2`},`ID de Compra: #`+n.id)),u(b,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),u(S,{color:`violet`,size:`2`,variant:`soft`},n.status.replaceAll(`_`,` `).split(` `).map(e=>e.charAt(0).toUpperCase()+e.slice(1).toLowerCase()).join(` `))),u(E,{size:`4`}),u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,width:`100%`},direction:`column`,gap:`1`},u(C,{as:`p`,size:`4`,weight:`medium`},`Detalles de Envío:`),u(C,{as:`p`,size:`3`},`Nombre: `+n.shipping_name),u(C,{as:`p`,size:`3`},`Dirección: `+n.shipping_address+`, `+n.shipping_neighborhood+`, `+n.shipping_city),u(C,{as:`p`,size:`3`},`Teléfono: `+n.shipping_phone)),u(E,{size:`4`}),u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,width:`100%`},direction:`column`,gap:`2`},u(C,{as:`p`,size:`4`,weight:`medium`},`Artículos Comprados:`),u(C,{as:`p`,color:`gray`,size:`2`},`Haz clic en un producto para ver los detalles o volver a comprar.`),u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},(s(e.purchase_items_map_rx_state_[n.id])?e.purchase_items_map_rx_state_[n.id]:[]).map((e,n)=>u(b,{align:`center`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,key:n,gap:`4`},u(x,{css:{cursor:`pointer`,"&:hover":{opacity:.8}},onClick:n=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.open_product_detail_modal`,{post_id:e.id},{})],[n],{})},u(`img`,{alt:e.title,css:{width:`80px`,height:`80px`,objectFit:`cover`,borderRadius:`md`},src:a(d.UPLOAD)+`/`+e.image_url})),u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`1`},u(C,{as:`p`,size:`3`,weight:`bold`},e.title),u(C,{as:`p`,color:`gray`,size:`2`},e.variant_details_str)),u(b,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`end`},direction:`column`,gap:`1`},u(C,{as:`p`,size:`3`},e.quantity+`x `+e.price_at_purchase_cop),u(C,{as:`p`,css:{textAlign:`right`},size:`3`,weight:`bold`},e.subtotal_cop)))))),u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`end`,width:`100%`,marginTop:`1em`},direction:`column`,gap:`2`},u(b,{align:`center`,className:`rx-Stack`,direction:`row`,gap:`3`},u(b,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),u(C,{as:`p`,size:`4`,weight:`medium`},`Envío:`),u(C,{as:`p`,size:`4`},n.shipping_applied_cop)),u(b,{align:`center`,className:`rx-Stack`,direction:`row`,gap:`3`},u(b,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),u(w,{size:`5`,weight:`medium`},`Total Compra:`),u(w,{size:`6`},n.total_price_cop))),u(E,{css:{marginTop:`1em`,marginBottom:`1em`},size:`4`}),u(z.Fragment,{},n.status===`shipped`?u(z.Fragment,{},u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},u(_,{color:`blue`,css:{icon:`truck`,width:`100%`}},u(g,{},u(N,{})),u(v,{},`Tu pedido llegará aproximadamente el: `+n.estimated_delivery_date_formatted)),u(y,{color:`green`,css:{width:`100%`,marginTop:`0.5em`},onClick:e=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.user_confirm_delivery`,{purchase_id:n.id},{})],[e],{})},`He Recibido mi Pedido`))):u(z.Fragment,{})),u(z.Fragment,{},n.status===`delivered`?u(z.Fragment,{},u(b,{align:`start`,className:`rx-Stack`,css:{width:`100%`,alignItems:`center`},direction:`column`,gap:`3`},u(_,{color:`violet`,css:{icon:`check_check`,width:`100%`}},u(g,{},u(R,{})),u(v,{},`¡Pedido entregado! Gracias por tu compra.`)),u(b,{align:`start`,className:`rx-Stack`,css:{marginTop:`1em`,width:`100%`},direction:`row`,gap:`3`},u(p,{asChild:!0,css:{width:`100%`,"&:hover":{color:`var(--accent-8)`}}},u(r,{target:``,to:`/invoice?id=`+n.id},u(y,{css:{width:`100%`},variant:`outline`},`Imprimir Factura`))),u(y,{color:`orange`,css:{width:`100%`},onClick:e=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.go_to_return_page`,{purchase_id:n.id},{})],[e],{}),variant:`solid`},`Devolución o Cambio`)))):u(z.Fragment,{}))))))}function K(){let e=(0,z.useContext)(l.reflex___state____state),t=(0,z.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state);return u(z.Fragment,{},e.is_hydrated_rx_state_&&t.is_authenticated_rx_state_?u(z.Fragment,{},u(x,{},u(U,{}),u(x,{css:{position:`fixed`,bottom:`1.5rem`,right:`1.5rem`,zIndex:`1000`}},u(I,{}))),u(L,{})):u(z.Fragment,{},u(b,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`}},u(j,{}))))}function q(){(0,z.useEffect)(()=>(((...n)=>t([e.is_admin_rx_state_?i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.on_load_profile_page`,{},{}):null],n,{}))(),()=>{}),[]);let e=(0,z.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,z.useContext)(c);return u(x,{css:{width:`100%`,minHeight:`100vh`}},u(F,{}),u(m,{columns:{initial:`1`,lg:`5em 1fr`},css:{width:`100%`}},u(x,{css:{"@media screen and (min-width: 0)":{display:`none`},"@media screen and (min-width: 30em)":{display:`none`},"@media screen and (min-width: 48em)":{display:`block`}}}),u(x,{css:{width:`100%`,height:`100%`,"@media screen and (min-width: 0)":{paddingInlineStart:`1em`,paddingInlineEnd:`1em`},"@media screen and (min-width: 30em)":{paddingInlineStart:`2em`,paddingInlineEnd:`2em`},paddingTop:`2em`,paddingBottom:`2em`}},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,minHeight:`85vh`,width:`100%`},direction:`row`,gap:`3`},u(b,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,padding:`1em`,borderRight:`1px solid var(--gray-6)`,height:`100%`,minWidth:`250px`},direction:`column`,gap:`2`},u(w,{css:{marginBottom:`0.5em`,paddingInlineStart:`0.75em`,paddingInlineEnd:`0.75em`},size:`7`},`Mi Cuenta`),u(A,{}),u(O,{}),u(k,{}),u(D,{})),u(x,{css:{padding:`2em`,width:`100%`}},u(b,{align:`center`,className:`rx-Stack`,css:{width:`100%`,maxWidth:`960px`},direction:`column`,gap:`6`},u(w,{size:`8`},`Mi Historial de Compras`),u(C,{as:`p`,color:`gray`,size:`4`},`Aquí puedes ver el estado y los detalles de todos tus pedidos.`),u(X,{}),u(Y,{})))))))}function J(){(0,z.useEffect)(()=>(((...n)=>t([e.is_admin_rx_state_?i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.on_load_profile_page`,{},{}):null],n,{}))(),()=>{}),[]);let e=(0,z.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,z.useContext)(c);return u(x,{css:{width:`100%`,minHeight:`100vh`}},u(F,{}),u(m,{columns:{initial:`1`,lg:`5em 1fr`},css:{width:`100%`}},u(x,{css:{"@media screen and (min-width: 0)":{display:`none`},"@media screen and (min-width: 30em)":{display:`none`},"@media screen and (min-width: 48em)":{display:`block`}}}),u(x,{css:{width:`100%`,height:`100%`,"@media screen and (min-width: 0)":{paddingInlineStart:`1em`,paddingInlineEnd:`1em`},"@media screen and (min-width: 30em)":{paddingInlineStart:`2em`,paddingInlineEnd:`2em`},paddingTop:`2em`,paddingBottom:`2em`}},u(z.Fragment,{},u(K,{})))))}function Y(){let e=(0,z.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return u(z.Fragment,{},s(e.filtered_user_purchases_rx_state_)?u(G,{}):u(z.Fragment,{},u(b,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,paddingTop:`2em`,paddingBottom:`2em`}},u(C,{as:`p`},`No se encontraron compras para tu búsqueda.`))))}function X(){let e=(0,z.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,z.useContext)(c),r=(0,z.useCallback)(e=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.set_search_query_user_history`,{query:e.target.value},{})],[e],{}),[t,i]);return u(B.default,{css:{width:`100%`,maxWidth:`400px`,marginTop:`1.5em`,marginBottom:`1.5em`},debounceTimeout:300,element:T,onChange:r,placeholder:`Buscar por ID o producto...`,value:o(e.search_query_user_history_rx_state_)?e.search_query_user_history_rx_state_:``})}var Z=n(function(){return u(z.Fragment,{},u(x,{},u(H,{}),u(x,{css:{position:`fixed`,bottom:`1.5rem`,right:`1.5rem`,zIndex:`1000`}},u(I,{}))),u(`title`,{},`Mis Compras`),u(`meta`,{content:`favicon.ico`,property:`og:image`}))});export{Z as default};