import{E as e,F as t,I as n}from"./chunk-C37GKA54-CfNxjTQL.js";import"./jsx-runtime-CHhOzT3j.js";import{b as r,f as i,j as a,l as o,s}from"./state-CKLd4-s1.js";import{$ as c,R as l,S as u,T as d,U as f,V as p,W as m,X as h,_ as g,a1 as _,a2 as v,a3 as y,a4 as b,a5 as x,a7 as S,a8 as C,e as w,n as T,y as E}from"./esm-BuWRJK6H.js";import{D,G as O,H as k,I as A,P as j,Q as M,b as N,c as P,g as ee,n as F,s as I,t as L,v as R,z}from"./stateful_components-BRFNziMz.js";import"./createLucideIcon-DqqTLPwf.js";var B=n(t()),V=n(k());function H(){let e=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return s(C,{css:{textAlign:`left`},size:`5`},`Asunto: `+e.current_ticket_rx_state_?.subject)}function U(){let e=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,B.useContext)(a),i=(0,B.useCallback)(e=>t([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.set_new_message_content`,{content:e.target.value},{})],[e],{}),[t,r]);return s(V.default,{css:{minHeight:`40px`,maxHeight:`120px`,flexGrow:`1`},debounceTimeout:300,element:w,name:`message_content`,onChange:i,placeholder:`Escribe tu mensaje...`,value:e.new_message_content_rx_state_})}function W(){let e=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return s(B.Fragment,{},e.current_ticket_rx_state_?.status!==`resolved`&&e.current_ticket_rx_state_?.status!==`closed`?s(B.Fragment,{},s(q,{})):s(B.Fragment,{},s(u,{css:{icon:`info`,width:`100%`}},s(l,{},s(M,{})),s(d,{},`Esta solicitud ha sido cerrada y ya no se pueden enviar mensajes.`))))}function G(){let e=(0,B.useContext)(o.reflex___state____state),t=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state);return s(B.Fragment,{},e.is_hydrated_rx_state_&&t.is_authenticated_rx_state_?s(B.Fragment,{},s(m,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,minHeight:`85vh`,padding:`2em`}},s(Q,{}))):s(B.Fragment,{},s(m,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`}},s(D,{}))))}function K(){let[e,t]=(0,B.useContext)(a);return s(m,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},[`El pedido no cumple con las características`,`El pedido tiene defectos de fábrica`,`El pedido no es el correcto`].map((t,n)=>s(f,{css:{width:`100%`},key:n,onClick:n=>e([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.create_support_ticket`,{reason:t},{})],[n],{}),variant:`outline`},t)))}function q(){let[e,t]=(0,B.useContext)(a),n=(0,B.useCallback)(t=>{let n=t.target;t.preventDefault();let i={...Object.fromEntries(new FormData(n).entries())};((...t)=>e([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.post_support_message`,{form_data:i},{})],t,{}))(t),n.reset()});return s(O,{className:`Root `,css:{width:`100%`},onSubmit:n},s(m,{align:`start`,className:`rx-Stack`,css:{width:`100%`,alignItems:`end`},direction:`row`,gap:`3`},s(U,{}),s(f,{css:{height:`100%`},type:`submit`},`Enviar`)))}function J(){let e=(0,B.useContext)(o.reflex___state____state);return s(B.Fragment,{},e.is_hydrated_rx_state_?s(ne,{}):s(B.Fragment,{},s(m,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100vh`,width:`100%`,background:`var(--gray-2)`}},s(p,{size:`3`}))))}function Y(){let e=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return s(B.Fragment,{},e.current_ticket_rx_state_?.status!==`resolved`&&e.current_ticket_rx_state_?.status!==`closed`?s(B.Fragment,{},s(y,{},s(x,{},s(f,{color:`red`,variant:`soft`},`Cerrar Solicitud`)),s(b,{},s(_,{},`Confirmar Cierre`),s(v,{},`¿Estás seguro de que quieres cerrar esta solicitud? Esta acción no se puede deshacer.`),s(m,{css:{marginTop:`1em`},justify:`end`,gap:`3`},s(g,{},s(f,{},`Cancelar`)),s(c,{},s(m,{},s(X,{}))))))):s(B.Fragment,{}))}function X(){let e=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,B.useContext)(a),i=(0,B.useCallback)(n=>t([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.close_ticket`,{ticket_id:e.current_ticket_rx_state_?.id},{})],[n],{}),[t,r,e]);return s(f,{onClick:i},`Sí, Cerrar`)}function Z(){let e=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return s(B.Fragment,{},i(e.current_ticket_rx_state_)?s(B.Fragment,{},s(m,{align:`start`,className:`rx-Stack`,css:{width:`100%`,maxWidth:`800px`},direction:`column`,gap:`4`},s(L,{}),s(m,{align:`start`,className:`rx-Stack`,css:{width:`100%`,marginTop:`1.5em`},direction:`row`,gap:`3`},s(H,{}),s(m,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),s(Y,{})),s($,{}),s(W,{}))):s(B.Fragment,{},s(m,{align:`start`,className:`rx-Stack`,css:{width:`100%`,maxWidth:`700px`},direction:`column`,gap:`3`},s(L,{}),s(C,{css:{marginTop:`1.5em`},size:`5`},`¿Cuál es el motivo de tu solicitud?`),s(C,{color:`gray`,css:{marginTop:`1em`},size:`4`},`Devolución`),s(K,{}),s(C,{color:`gray`,css:{marginTop:`1.5em`},size:`4`},`Cambio`),s(te,{}))))}function Q(){let e=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return s(B.Fragment,{},e.is_loading_rx_state_?s(B.Fragment,{},s(p,{size:`3`})):s(Z,{}))}function $(){let e=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return s(m,{align:`start`,className:`rx-Stack`,css:{width:`100%`,maxHeight:`60vh`,overflowY:`auto`,padding:`1em`},direction:`column`,gap:`3`},e.ticket_messages_rx_state_.map((t,n)=>s(h,{css:{background:t.author_id===e.current_ticket_purchase_rx_state_?.userinfo_id?`var(--accent-4)`:`var(--gray-4)`,padding:`0.75em 1em`,borderRadius:`lg`,maxWidth:`80%`,alignSelf:t.author_id===e.current_ticket_purchase_rx_state_?.userinfo_id?`flex-end`:`flex-start`},key:n},s(m,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`1`},s(S,{as:`p`,size:`2`,weight:`bold`},t.author_username),s(S,{as:`p`,css:{whiteSpace:`pre-wrap`}},t.content),s(S,{as:`p`,color:`gray`,css:{textAlign:`right`},size:`1`},t.created_at_formatted)))))}function te(){let[e,t]=(0,B.useContext)(a),n=(0,B.useCallback)(t=>e([r(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.create_support_ticket`,{reason:`La talla, medida o número del pedido no es lo que esperabas`},{})],[t],{}),[e,r]);return s(f,{css:{width:`100%`},onClick:n,variant:`outline`},`La talla, medida o número del pedido no es lo que esperabas`)}function ne(){let e=(0,B.useContext)(o.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return s(B.Fragment,{},e.is_admin_rx_state_?s(B.Fragment,{},s(h,{},s(h,{css:{"@media screen and (min-width: 0)":{display:`none`},"@media screen and (min-width: 30em)":{display:`none`},"@media screen and (min-width: 48em)":{display:`block`},position:`fixed`,left:`0`,top:`0`,height:`100%`,width:`16em`,zIndex:`1000`,background:`var(--gray-2)`}},s(m,{align:`start`,className:`rx-Stack`,css:{padding:`1em`,height:`100vh`},direction:`column`,gap:`5`},s(m,{align:`center`,className:`rx-Stack`,css:{width:`100%`,marginBottom:`1.5em`},direction:`row`,justify:`center`,gap:`3`},s(`img`,{css:{width:`9em`,height:`auto`,borderRadius:`25%`},src:`/logo.png`})),s(m,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`2`},s(I,{}),s(z,{})),s(m,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),s(m,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`3`},s(T,{size:`4`}),s(m,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,justify:`between`,gap:`3`},s(R,{}),s(m,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}})),s(F,{})))),s(ee,{}),s(h,{css:{"@media screen and (min-width: 0)":{marginLeft:`0`},"@media screen and (min-width: 30em)":{marginLeft:`0`},"@media screen and (min-width: 48em)":{marginLeft:`16em`},padding:`2em`,width:`100%`}},s(m,{align:`start`,className:`rx-Stack`,css:{backdropFilter:`blur(10px)`,"@media screen and (min-width: 0)":{display:`flex`},"@media screen and (min-width: 30em)":{display:`flex`},"@media screen and (min-width: 48em)":{display:`none`},position:`sticky`,top:`0`,left:`0`,width:`100%`,padding:`0.5em 1em`,zIndex:`999`,background:`var(--gray-2)`},direction:`row`,gap:`3`},s(A.Trigger,{asChild:!0},s(E,{color:`gray`,css:{padding:`6px`},variant:`ghost`},s(j,{size:24})))),s(B.Fragment,{},s(G,{}))),s(h,{css:{position:`fixed`,bottom:`1.5rem`,right:`1.5rem`,zIndex:`1000`}},s(P,{})))):s(B.Fragment,{},s(h,{css:{width:`100%`}},s(N,{}),s(h,{css:{paddingTop:`6rem`,paddingInlineStart:`1em`,paddingInlineEnd:`1em`,paddingBottom:`1em`,width:`100%`}},s(B.Fragment,{},s(G,{}))),s(h,{css:{position:`fixed`,bottom:`1.5rem`,right:`1.5rem`,zIndex:`1000`}},s(P,{})))))}var re=e(function(){return s(B.Fragment,{},s(J,{}),s(`title`,{},`Devolución o Cambio`),s(`meta`,{content:`favicon.ico`,property:`og:image`}))});export{re as default};