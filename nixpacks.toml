# nixpacks.toml
# Este archivo le dice a Nixpacks cómo construir y ejecutar tu backend en Railway.

# Proveedor principal: Python.
providers = ['python']

# Variables para optimizar el entorno de producción.
[variables]
  NEXT_TELEMETRY_DISABLED = '1'
  NPM_CONFIG_UPDATE_NOTIFIER = 'false'
  NPM_CONFIG_FUND = 'false'
  PIP_DISABLE_PIP_VERSION_CHECK = '1'

# Fase de setup: Instala paquetes del sistema operativo.
[phases.setup]
  apt_packages = ["git", "nodejs", "npm", "unzip", "parallel", "build-essential"]

# Fase de inicio: Cómo se ejecuta tu aplicación.
# Se ejecuta únicamente el backend de Reflex en el host 0.0.0.0 y puerto 8000.
[start]
  cmd = "alembic upgrade head && reflex run --backend-only --backend-host 0.0.0.0 --backend-port 8000 --loglevel info"
# --- FIN DE LA CORRECCIÓN DEFINITIVA ---