# Caddyfile
{
    # El puerto interno que Railway expondrá al mundo
    http_port 3000
}

:3000 {
    # Habilita la compresión para un rendimiento más rápido
    encode zstd gzip

    # Redirige todas las solicitudes a la API de backend a donde se ejecuta Reflex
    handle_path /backend/* {
        reverse_proxy localhost:8000
    }

    # Sirve los archivos estáticos del frontend desde la carpeta generada por `reflex export`
    handle {
        root * .web/public
        file_server
    }
}