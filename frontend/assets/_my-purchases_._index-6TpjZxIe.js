import{E as e,F as t,I as n,d as r}from"./chunk-C37GKA54-CIdGUwdJ.js";import"./jsx-runtime-Cvp9ONst.js";import{b as i,c as a,e as o,f as s,j as c,l,s as u,u as d}from"./state-CBvcI-Dm.js";import{$ as f,G as p,J as m,N as h,O as g,P as _,Q as v,R as y,a1 as b,d as x,n as S,t as C}from"./esm-x6Qm4028.js";import{B as w,b as T,c as E,d as D,k as O,x as k}from"./stateful_components-BZUpYohH.js";import"./createLucideIcon-KzSCZTNB.js";var A=n(t()),j=n(w());function M(){let e=(0,A.useContext)(l.reflex___state____state);return u(A.Fragment,{},e.is_hydrated_rx_state_?u(A.Fragment,{},u(_,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,minHeight:`85vh`,width:`100%`},direction:`row`,gap:`3`},u(_,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,padding:`1em`,borderRight:`1px solid #ededed`,height:`100%`,minWidth:`250px`},direction:`column`,gap:`3`},u(b,{css:{marginBottom:`1em`},size:`6`},`Mi Cuenta`),u(C,{asChild:!0,css:{width:`100%`,padding:`0.5em`,"&:hover":{color:`var(--accent-8)`}}},u(r,{to:`/my-purchases`},u(f,{as:`p`},`Mis Compras`))),u(C,{asChild:!0,css:{width:`100%`,padding:`0.5em`,"&:hover":{color:`var(--accent-8)`}}},u(r,{to:`/my-account/shipping-info`},u(f,{as:`p`},`Información para envíos`))),u(C,{asChild:!0,css:{width:`100%`,padding:`0.5em`,"&:hover":{color:`var(--accent-8)`}}},u(r,{to:`/my-account/saved-posts`},u(f,{as:`p`},`Publicaciones Guardadas`)))),u(v,{css:{padding:`2em`,width:`100%`}},u(_,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,width:`100%`}},u(_,{align:`center`,className:`rx-Stack`,css:{width:`100%`,maxWidth:`960px`},direction:`column`,gap:`6`},u(b,{size:`7`},`Mi Historial de Compras`),u(R,{}),u(L,{}),u(O,{})))))):u(A.Fragment,{},u(_,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`85vh`}},u(g,{size:`3`}))))}function N(){let e=(0,A.useContext)(l.reflex___state____state),t=(0,A.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state);return u(A.Fragment,{},e.is_hydrated_rx_state_&&t.is_authenticated_rx_state_?u(M,{}):u(A.Fragment,{},u(_,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`}},u(k,{}))))}function P(){let e=(0,A.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return u(A.Fragment,{},e.is_admin_rx_state_?u(A.Fragment,{},u(v,{css:{width:`100%`,minHeight:`100vh`}},u(T,{}),u(v,{css:{padding:`1em`,width:`100%`}},u(A.Fragment,{},u(N,{}))))):u(A.Fragment,{},u(v,{css:{width:`100%`}},u(E,{}),u(v,{css:{paddingTop:`6rem`,paddingInlineStart:`1em`,paddingInlineEnd:`1em`,paddingBottom:`1em`,width:`100%`}},u(A.Fragment,{},u(N,{}))),u(v,{css:{position:`fixed`,bottom:`1.5rem`,right:`1.5rem`,zIndex:`1000`}},u(D,{})))))}function F(){let e=(0,A.useContext)(l.reflex___state____state);return u(A.Fragment,{},e.is_hydrated_rx_state_?u(P,{}):u(A.Fragment,{},u(_,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,height:`100vh`,width:`100%`,background:`var(--gray-2)`}},u(g,{size:`3`}))))}function I(){let e=(0,A.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,A.useContext)(c);return u(A.Fragment,{},e.filtered_user_purchases_rx_state_.map((n,o)=>u(m,{css:{width:`100%`,padding:`1.5em`},key:o},u(_,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`column`,gap:`4`},u(_,{align:`start`,className:`rx-Stack`,css:{width:`100%`},direction:`row`,justify:`between`,gap:`3`},u(_,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`},direction:`column`,gap:`3`},u(f,{as:`p`,size:`5`,weight:`bold`},`Compra del: `+n.purchase_date_formatted),u(f,{as:`p`,color:`gray`,size:`2`},`ID de Compra: #`+n.id)),u(_,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),u(_,{align:`start`,className:`rx-Stack`,css:{alignItems:`end`},direction:`column`,gap:`3`},u(y,{color:`blue`,size:`2`,variant:`soft`},n.status))),u(S,{size:`4`}),u(_,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,width:`100%`},direction:`column`,gap:`1`},u(f,{as:`p`,size:`4`,weight:`medium`},`Detalles de Envío:`),u(f,{as:`p`,size:`3`},`Nombre: `+n.shipping_name),u(f,{as:`p`,size:`3`},`Dirección: `+n.shipping_address+`, `+n.shipping_neighborhood+`, `+n.shipping_city),u(f,{as:`p`,size:`3`},`Teléfono: `+n.shipping_phone)),u(S,{size:`4`}),u(_,{align:`start`,className:`rx-Stack`,css:{alignItems:`start`,width:`100%`},direction:`column`,gap:`2`},u(f,{as:`p`,size:`4`,weight:`medium`},`Artículos Comprados:`),u(f,{as:`p`,color:`gray`,size:`2`},`Haz clic en un producto para ver los detalles o volver a comprar.`),u(p,{css:{width:`100%`},scrollbars:`horizontal`,type:`auto`},u(_,{align:`start`,className:`rx-Stack`,css:{paddingTop:`0.5em`,paddingBottom:`0.5em`},direction:`row`,gap:`4`},(s(e.purchase_items_map_rx_state_[n.id])?e.purchase_items_map_rx_state_[n.id]:[]).map((e,n)=>u(v,{css:{width:`110px`},key:n},u(_,{align:`center`,className:`rx-Stack`,direction:`column`,gap:`1`},u(v,{css:{cursor:`pointer`,position:`relative`,"&:hover":{transform:`scale(1.05)`},transition:`transform 0.2s`},onClick:n=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.open_product_detail_modal`,{post_id:e.id},{})],[n],{})},u(`img`,{alt:e.title,css:{width:`100px`,height:`100px`,objectFit:`cover`,borderRadius:`md`},src:a(d.UPLOAD)+`/`+e.image_url})),u(_,{align:`start`,className:`rx-Stack`,css:{alignItems:`center`,marginTop:`0.25em`},direction:`column`,gap:`0`},u(f,{as:`p`,color:`violet`,size:`3`,weight:`bold`},e.quantity+`x`),u(f,{as:`p`,size:`2`,weight:`medium`},e.price_at_purchase_cop)))))))),u(_,{align:`center`,className:`rx-Stack`,css:{marginTop:`1em`},direction:`row`,gap:`3`},u(_,{css:{flex:1,justifySelf:`stretch`,alignSelf:`stretch`}}),u(b,{size:`5`,weight:`medium`},`Total Compra:`),u(b,{size:`6`},n.total_price_cop)),u(A.Fragment,{},n.status===`pending_confirmation`?u(A.Fragment,{}):u(A.Fragment,{},u(C,{asChild:!0,css:{"&:hover":{color:`var(--accent-8)`}}},u(r,{target:``,to:`/invoice?id=`+n.id},u(h,{css:{width:`100%`,marginTop:`1em`},variant:`outline`},`Imprimir Factura`)))))))))}function L(){let e=(0,A.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state);return u(A.Fragment,{},s(e.filtered_user_purchases_rx_state_)?u(I,{}):u(A.Fragment,{},u(_,{css:{display:`flex`,alignItems:`center`,justifyContent:`center`,paddingTop:`2em`,paddingBottom:`2em`}},u(f,{as:`p`},`No se encontraron compras para tu búsqueda.`))))}function R(){let e=(0,A.useContext)(l.reflex___state____state__reflex_local_auth___local_auth____local_auth_state__likemodas___state____app_state),[t,n]=(0,A.useContext)(c),r=(0,A.useCallback)(e=>t([i(`reflex___state____state.reflex_local_auth___local_auth____local_auth_state.likemodas___state____app_state.set_search_query_user_history`,{query:e.target.value},{})],[e],{}),[t,i]);return u(j.default,{css:{width:`100%`,maxWidth:`400px`,marginTop:`1.5em`,marginBottom:`1.5em`},debounceTimeout:300,element:x,onChange:r,placeholder:`Buscar por ID o producto...`,value:o(e.search_query_user_history_rx_state_)?e.search_query_user_history_rx_state_:``})}var z=e(function(){return u(A.Fragment,{},u(F,{}),u(`title`,{},`Mis Compras`),u(`meta`,{content:`favicon.ico`,property:`og:image`}))});export{z as default};